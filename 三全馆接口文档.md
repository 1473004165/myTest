>**三全馆接口文档**





>**首页接口**

>1.登录

~~~properties

URL		 http://xxx.xxx.xx.x:8080/sanquan/
序号	参数名		参数说明	数据类型	可选/必选	备注
1	 username    用户名	  String	   必选	  如果确定是教务系统登录，表示学号
2	 password	 密码		   String  	    必选	   用户密码

~~~

~~~json
接口名称: 用户登录
url: http://xxx.xxx.xx.x:8080/sanquan/login
请求格式: {username:"xxx",password:"xxx"}		   #登陆成功后会把用户信息存入session域
请求方式: POST请求
返回值格式1: {
    			loginCode:"0",
    			msg: "xxx"
		    }            					    #备注：登陆失败
返回值格式2: {
    			loginCode:"1",
    			username:"xxx"
		    }								   #备注：登陆成功

返回值说明：

    参数名	 		参数类型		参数说明	必有/未必有	备注
    loginCode	   String		 登录结果状态	    必有	   返回值为1，代表登录成功；0，代表失败
    msg	   		   String		 请求结果消息	   未必有	  登陆失败时返回的错误信息



~~~



>2.消息提醒

~~~properties

URL		 http://xxx.xxx.xx.x:8080/sanquan/msg
序号	参数名		参数说明	数据类型	可选/必选	备注
1	  msgId      消息id	   Integer	    必选	   用于查询消息的具体内容

~~~

~~~json
接口名称: 消息提醒列表
url: http://xxx.xxx.xx.x:8080/sanquan/msg
请求格式: {}		   							#从session域中判断登录情况，获取用户名
请求方式: GET请求
返回值格式: {
    			"messages":[
                    		  {"msgId":1,"title":"xxx"},
                               {"msgId":2,"title":"xxx"},
                    		  {"msgId":3,"title":"xxx"}
                    		   ......
                 ]
		   }   

返回值说明：

    参数名	 		参数类型		参数说明		必有/未必有		备注
    messages	   message[]	  消息的集合	   	     未必有	     没有消息提醒时为空
    msgId		   Integer		 消息在数据库的id	   未必有		   没有消息提醒时为空
    title	   	   String		 消息的标题/简述	   未必有	       没有消息提醒时为空




接口名称: 消息详细
url: http://xxx.xxx.xx.x:8080/sanquan/msg/detail
请求格式: {"msgId":4}		   							#从session域中判断登录情况，获取用户名
请求方式: GET请求
返回值格式: {
    			"title":"xxx",
    			"detail":"xxx"
		   }   

返回值说明：

    参数名	 		参数类型		参数说明		必有/未必有		 备注
    title	   	   String		 消息的标题/简述	   必有	     发出此请求时，消息列表一定不为空
    detail		   String		 消息的具体内容	   必有		发出此请求时，消息列表一定不为空


~~~



>3.预约模块

~~~properties

URL		 http://xxx.xxx.xx.x:8080/sanquan/book
序号	参数名			参数说明	数据类型	可选/必选	备注
1	 startTime		开始时间	 date		 必选		预定自习室开始时间
2	 endTime		结束时间	 date		 必选		预定自习室结束时间
3	 roomId			自习室id	 integer	  必选	 预定的自习室的id
4	 emptyId		空闲座位id	 integer	  必选	发起预定请求选中的座位号id

~~~

~~~json

接口名称: 查询单人自习室状态
url: http://xxx.xxx.xx.x:8080/sanquan/book/personalRoom
请求格式: {"startTime":"xxx","endTime":"xxx"}
请求方式: POST
返回值格式: {"rooms":[
                        {"roomId":3,"address":"xxx","emptyNum":3,"emptyId":[1,2,3],"openTime":time}，
                        {"roomId":4,"address":"xxx","emptyNum":3,"emptyId":[1,2,3],"openTime":time}
					   ....
                    ]
		   }


返回值说明：

	参数名	 		参数类型		参数说明					必有/未必有			备注
     rooms	   		room[]		  当前页展示的自习室的属性	        必有	      
     roomId	   		integer		  自习室的id	   				  必有
	address		    string		  自习室地址						必有
	emptyNum	    integer		  空闲座位总数					必有
	emptyId		   integer[]	  空闲座位id对应数据库表中id	     未必有		当emptyNum=0，该项为空
	openTime	    string		  该自习室开放时间				   必有			   此项待定




接口名称：预约单人自习室
url: http://xxx.xxx.xx.x:8080/sanquan/book/bookPersonal
请求格式: {"roomId":1,"emptyId":6,"startTime":"2021/03/23 15:23:41","endTime":"2021/03/23 18:25:00"}
		 #自动生成的订单，确认预定会提交这些数据
请求方式: POST
返回值格式1: {
    			bookCode:"0",
    			bookMsg: "xxx"
		    }            					    #备注：预定失败
返回值格式2: {
    			bookCode:"1"
		    }								   #备注：预定成功

返回值说明：

	参数名	 		参数类型		参数说明					必有/未必有			备注
     bookCode	   	integer		  自习室预定结果			        必有	      	1：预订成功；  0：预定失败
     bookMsg	   	string		  预定失败返回的错误信息	   		未必有			该条目仅预定失败返回	



-------------------------------------------------------------------------------------------------------------------


接口名称: 查询多人会议室状态
url: http://xxx.xxx.xx.x:8080/sanquan/book/meetingRoom
请求格式: {"startTime":"xxx","endTime":"xxx"}
请求方式: POST
返回值格式: {"rooms":[
                        {"roomId":3,"address":"xxx","emptyNum":3,"emptyId":[1,2,3],"openTime":time}，
                        {"roomId":4,"address":"xxx","emptyNum":3,"emptyId":[1,2,3],"openTime":time}
					   ....
                    ]
		   }


返回值说明：

	参数名	 		参数类型		参数说明					必有/未必有			备注
     rooms	   		room[]		  当前页展示的会议室的属性	        必有	      
     roomId	   		integer		  会议室的id	   				  必有
	address		    string		  会议室地址						必有
	emptyNum	    integer		  空闲座位总数					必有
	emptyId		   integer[]	  空闲座位id对应数据库表中id		 未必有		 当emptyNum=0，该项为空
	openTime	    string		  该自习室开放时间				   必有			   次项待定




接口名称：预约多人会议室
url: http://xxx.xxx.xx.x:8080/sanquan/book/bookMeeting
请求格式: {"roomId":1,"emptyId":6,"startTime":"2021/03/23 15:23:41","endTime":"2021/03/23 18:25:00"}
		 #自动生成的订单，确认预定会提交这些数据
请求方式: POST
返回值格式1: {
    			bookCode:"0",
    			bookMsg: "xxx"
		    }            					    #备注：预定失败
返回值格式2: {
    			bookCode:"1"
		    }								   #备注：预定成功

返回值说明：

	参数名	 		参数类型		参数说明					必有/未必有			备注
     bookCode	   	integer		  自习室预定结果			        必有	      	1：预订成功；  0：预定失败
     bookMsg	   	string		  预定失败返回的错误信息	   		未必有			该条目仅预定失败返回	


~~~



>4.寻求辅导

~~~properties

URL		 http://xxx.xxx.xx.x:8080/sanquan/findTeacher
序号		参数名			参数说明	数据类型	可选/必选		备注
1	 	 subject		学科名称	 String		 可选		 用户使用搜索框时可使用此参数

~~~

~~~json

接口名称：默认学霸推荐数据展示		#跳转寻求辅导页面后立即请求（此时无搜索条件）
url: http://xxx.xxx.xx.x:8080/sanquan/book/findTeacher/outstandingTeacher
请求格式: {}
请求方式: GET
返回值格式: {"teachers":[
    					{
                            "name":"熊大",
    					  "GPA":"4.00",
    					  "phone":"123156464561",
    					  "image":"http://xxx.xxx.xx.x:8080/xiongda.jpg"
                          },
    					{
                            "name":"熊二",
    					  "GPA":"4.00",
    					  "phone":"123156464561",
    					  "image":"http://xxx.xxx.xx.x:8080/xionger.jpg"
                          },
    					{
                            "name":"熊三",
    					  "GPA":"3.97",
    					  "phone":"123156464561",
    					  "image":"http://xxx.xxx.xx.x:8080/xiongsan.jpg"
                          },
						......
					 ]
       	   }

返回值说明：

	参数名	 		参数类型		参数说明					必有/未必有			备注
     teachers	   teacher[]	 当前页展示的所有学霸信息集合	       未必有	       刚开始没有学霸认证时，数据为空
     name	   	    String		   学霸姓名						 未必有		
     GPA		    Double		  学霸学科绩点				    未必有
	phone    		String		  该学霸的联系方式				  未必有	
    image			String		  学霸的头像						未必有
        
        
        

接口名称：搜索结果学霸推荐数据展示
url: http://xxx.xxx.xx.x:8080/sanquan/book/findTeacher/outstandingTeacher
请求格式: {"subject":"高数"}			#若搜索框不输入内容（空参），则与默认学霸推荐数据展示结果一致
请求方式: GET
返回值格式: {"teachers":[
    					{
                            "name":"熊二",
    					  "GPA":"4.00",
    					  "phone":"123156464561",
    					  "image":"http://xxx.xxx.xx.x:8080/xionger.jpg"
                          },
    					{
                            "name":"熊三",
    					  "GPA":"3.97",
    					  "phone":"123156464561",
    					  "image":"http://xxx.xxx.xx.x:8080/xiongsan.jpg"
                          },
						......
					 ]
       	   }

返回值说明：

	参数名	 		参数类型		参数说明					必有/未必有			备注
     teachers	   teacher[]	  符合条件的所有学霸信息集合	        未必有	       	  
     name	   	    String		   学霸姓名						 未必有		
     GPA		    Double		  学霸学科绩点				    未必有
	phone    		String		  该学霸的联系方式				  未必有	
    image			String		  学霸的头像						未必有


~~~

